:root {
  /* TEMA PADR√ÉO (OBSIDIAN) */
  --bg-grad: radial-gradient(circle at 50% -10%, #1a1a2e 0%, #000 90%);
  --surface: rgba(20, 20, 25, 0.6); /* Vidro */
  --border: rgba(255, 255, 255, 0.08);
  --p1: #ff004c;
  --p2: #00e5ff;
  --gold: #ffcc00;
  --text-main: #fff;
  --ease: cubic-bezier(0.19, 1, 0.22, 1);
  --blur: blur(20px);
}

[data-theme="tactical"] {
  /* TEMA FC TACTICAL (VERDE NEON) */
  --bg-grad: radial-gradient(circle at 50% -10%, #1a2e1a 0%, #050505 90%);
  --surface: rgba(10, 25, 10, 0.7);
  --p1: #ccff00; /* Volt */
  --p2: #ccff00;
  --gold: #fff;
  --border: rgba(204, 255, 0, 0.2);
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; outline: none; }

body {
  background: var(--bg-grad); color: var(--text-main);
  font-family: 'Segoe UI', system-ui, sans-serif;
  min-height: 100vh; display: flex; flex-direction: column; align-items: center;
  transition: background 0.5s ease;
}

.app { width: 100%; max-width: 450px; padding: 20px; text-align: center; }

/* HEADER & TOOLS */
.header-row { display: flex; justify-content: space-between; align-items: center; margin: 25px 0; }
h1 { font-size: 0.9rem; font-weight: 900; letter-spacing: 6px; text-transform: uppercase; opacity: 0.6; margin: 0; }
.theme-btn { background: none; border: 1px solid var(--border); color: #fff; font-size: 1.2rem; padding: 8px; border-radius: 50%; cursor: pointer; }

/* LOBBY (VIDRO) */
#lobby {
  background: var(--surface); backdrop-filter: var(--blur); -webkit-backdrop-filter: var(--blur);
  padding: 40px 25px; border-radius: 35px; border: 1px solid var(--border);
  box-shadow: 0 40px 80px rgba(0,0,0,0.6);
}

.input-group { margin-bottom: 20px; text-align: left; }
.input-group label { font-size: 0.6rem; font-weight: 800; opacity: 0.7; text-transform: uppercase; letter-spacing: 2px; margin-left: 10px; display: block; }
.input-field {
  width: 100%; padding: 20px; background: rgba(0,0,0,0.4); border: 1px solid var(--border);
  color: #fff; border-radius: 18px; font-size: 1.1rem; font-weight: 600;
  transition: 0.3s var(--ease);
}
.input-field:focus { border-color: var(--p2); transform: scale(1.02); }

.btn-enter {
  width: 100%; padding: 22px; background: #fff; color: #000; border: none;
  border-radius: 18px; font-size: 1rem; font-weight: 900; text-transform: uppercase;
  cursor: pointer; margin-top: 10px; letter-spacing: 1px;
}

/* ARENA & CARDS */
#arena { display: none; width: 100%; animation: zoomUp 0.6s var(--ease); }
@keyframes zoomUp { from { opacity: 0; transform: translateY(40px) scale(0.9); } to { opacity: 1; transform: translateY(0) scale(1); } }

.btn-draw {
  background: #fff; color: #000; border: none; width: 100%; padding: 20px;
  font-size: 1.1rem; font-weight: 900; text-transform: uppercase; border-radius: 20px;
  margin-bottom: 30px; box-shadow: 0 10px 30px rgba(255,255,255,0.1); cursor: pointer;
  transition: 0.2s;
}
.btn-draw:active { transform: scale(0.96); }
.btn-draw:disabled { opacity: 0.4; cursor: default; }

.card {
  position: relative; background: var(--surface); backdrop-filter: var(--blur); -webkit-backdrop-filter: var(--blur);
  border-radius: 35px; margin-bottom: 25px; overflow: hidden; border: 1px solid var(--border);
  box-shadow: 0 30px 60px rgba(0,0,0,0.5); transition: transform 0.2s;
}

.card-accent { position: absolute; top: 0; left: 0; width: 6px; height: 100%; background: var(--team-color); z-index: 10; }
.card-content { padding: 30px 25px; text-align: left; position: relative; z-index: 2; }

/* LAYOUT DO TIME */
.top-row { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px; }
.owner-badge { 
  font-size: 0.65rem; font-weight: 900; text-transform: uppercase; 
  background: rgba(255,255,255,0.05); padding: 6px 12px; border-radius: 8px; color: var(--side-color);
}
.ovr-box { 
  font-size: 1.8rem; font-weight: 900; line-height: 1;
  text-shadow: 0 0 20px currentColor; /* Glow no numero */
}

.team-info { margin-bottom: 25px; }
.team-name { font-size: 2rem; font-weight: 900; line-height: 0.9; text-transform: uppercase; letter-spacing: -1px; margin-bottom: 8px; }
.star-player { font-size: 0.8rem; color: var(--gold); font-weight: 700; display: block; opacity: 0.9; }

/* BARRAS DE STATS */
.stats-grid { display: flex; gap: 10px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px; }
.stat-col { flex: 1; text-align: center; }
.stat-lbl { font-size: 0.5rem; font-weight: 900; opacity: 0.6; display: block; margin-bottom: 6px; }
.bar-track { height: 4px; background: rgba(0,0,0,0.5); border-radius: 4px; overflow: hidden; margin-bottom: 6px; }
.bar-fill { height: 100%; width: 0%; transition: width 1s var(--ease); background: var(--team-color); box-shadow: 0 0 10px var(--team-color); }
.stat-val { font-size: 1.1rem; font-weight: 900; }

/* SEM√ÅFORO DE CORES */
.val-legend { color: #00e5ff; text-shadow: 0 0 10px #00e5ff; } /* 85+ */
.val-elite { color: #00ff66; text-shadow: 0 0 10px #00ff66; } /* 80-84 */
.val-gold { color: #ffcc00; } /* 75-79 */
.val-base { color: #aaaaaa; } /* <75 */

.vs-icon { font-size: 1.5rem; font-weight: 900; font-style: italic; opacity: 0.3; margin: -10px 0 20px; }
footer { margin-top: 40px; font-size: 0.6rem; font-weight: 800; opacity: 0.4; letter-spacing: 2px; text-transform: uppercase; }

.shuffling .card { filter: blur(8px) grayscale(1); opacity: 0.4; transform: scale(0.98); }
  <div class="app">
  <div class="header-row">
    <h1>EA FC 26 PRO</h1>
    <button class="theme-btn" onclick="toggleTheme()">üé®</button>
  </div>

  <div id="lobby">
    <div class="input-group">
      <label>Comandante 01</label>
      <input type="text" id="p1Input" class="input-field" placeholder="Nome...">
    </div>
    <div class="input-group">
      <label>Comandante 02</label>
      <input type="text" id="p2Input" class="input-field" placeholder="Nome...">
    </div>
    <button class="btn-enter" onclick="bootArena()">Sincronizar Arena</button>
  </div>

  <div id="arena">
    <button class="btn-draw" id="btnSortear" onclick="startDraft()">Gerar Confronto</button>
    
    <div id="cardsGrid">
      <div class="card" id="c1">
        <div class="card-accent"></div>
        <div class="card-content">
          <div class="top-row">
            <span class="owner-badge" id="n1_owner" style="--side-color: var(--p1)">---</span>
            <div class="ovr-box" id="o1">00</div>
          </div>
          <div class="team-info">
            <div class="team-name"><span id="i1"></span> <span id="name1">---</span></div>
            <span class="star-player" id="star1">---</span>
          </div>
          <div class="stats-grid">
            <div class="stat-col"><span class="stat-lbl">ATA</span><div class="bar-track"><div class="bar-fill" id="f1a"></div></div><span class="stat-val" id="v1a">0</span></div>
            <div class="stat-col"><span class="stat-lbl">MED</span><div class="bar-track"><div class="bar-fill" id="f1m"></div></div><span class="stat-val" id="v1m">0</span></div>
            <div class="stat-col"><span class="stat-lbl">DEF</span><div class="bar-track"><div class="bar-fill" id="f1d"></div></div><span class="stat-val" id="v1d">0</span></div>
          </div>
        </div>
      </div>

      <div class="vs-icon">VS</div>

      <div class="card" id="c2">
        <div class="card-accent"></div>
        <div class="card-content">
          <div class="top-row">
            <span class="owner-badge" id="n2_owner" style="--side-color: var(--p2)">---</span>
            <div class="ovr-box" id="o2">00</div>
          </div>
          <div class="team-info">
            <div class="team-name"><span id="i2"></span> <span id="name2">---</span></div>
            <span class="star-player" id="star2">---</span>
          </div>
          <div class="stats-grid">
            <div class="stat-col"><span class="stat-lbl">ATA</span><div class="bar-track"><div class="bar-fill" id="f2a"></div></div><span class="stat-val" id="v2a">0</span></div>
            <div class="stat-col"><span class="stat-lbl">MED</span><div class="bar-track"><div class="bar-fill" id="f2m"></div></div><span class="stat-val" id="v2m">0</span></div>
            <div class="stat-col"><span class="stat-lbl">DEF</span><div class="bar-track"><div class="bar-fill" id="f2d"></div></div><span class="stat-val" id="v2d">0</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>EA FC 26 COMPETTITIVE ‚Ä¢ Direitos reservados a J. Rayan</footer>
  </div>
  // --- AUDIO SYSTEM V7 (MOBILE FORCE) ---
const SoundSystem = {
  ctx: null,
  init() {
    if (!this.ctx) {
      this.ctx = new (window.AudioContext || window.webkitAudioContext)();
      const b = this.ctx.createBuffer(1, 1, 22050);
      const s = this.ctx.createBufferSource();
      s.buffer = b; s.connect(this.ctx.destination); s.start(0);
    }
    if (this.ctx.state === 'suspended') this.ctx.resume();
  },
  playTick(f) {
    if (!this.ctx) return;
    const o = this.ctx.createOscillator(), g = this.ctx.createGain();
    o.type = 'square';
    o.frequency.setValueAtTime(f + (Math.random() * 10 - 5), this.ctx.currentTime); // Pitch variation
    g.gain.setValueAtTime(0.05, this.ctx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + 0.08);
    o.connect(g); g.connect(this.ctx.destination);
    o.start(); o.stop(this.ctx.currentTime + 0.08);
  },
  playImpact() {
    if (!this.ctx) return;
    const o = this.ctx.createOscillator(), g = this.ctx.createGain();
    o.type = 'triangle';
    o.frequency.setValueAtTime(100, this.ctx.currentTime);
    o.frequency.exponentialRampToValueAtTime(40, this.ctx.currentTime + 0.5);
    g.gain.setValueAtTime(0.2, this.ctx.currentTime);
    g.gain.linearRampToValueAtTime(0, this.ctx.currentTime + 0.5);
    o.connect(g); g.connect(this.ctx.destination);
    o.start(); o.stop(this.ctx.currentTime + 0.5);
  }
};

// --- DATABASE 98 TIMES (ORDEM EXATA 1-98) ---
const teamsDB = [
  // ALEMANHA
  {n:"FC K√∂ln", i:"üî¥‚ö™", s:"Marius B√ºlter", l:"Bundesliga", c:"#e30613", a:74, m:73, d:72},
  {n:"Augsburg", i:"üî¥üü¢", s:"Alexis Claude-Maurice", l:"Bundesliga", c:"#ba3733", a:75, m:74, d:74},
  {n:"Bayer Leverkusen", i:"üî¥‚ö´", s:"Patrik Schick", l:"Bundesliga", c:"#000000", a:82, m:79, d:78},
  {n:"Bayern M√ºnchen", i:"üî¥‚ö™", s:"Harry Kane", l:"Bundesliga", c:"#dd0000", a:89, m:85, d:83},
  {n:"Borussia Dortmund", i:"üü°‚ö´", s:"Serhou Guirassy", l:"Bundesliga", c:"#FDE100", a:81, m:81, d:82},
  {n:"Eintracht Frankfurt", i:"‚ö™üî¥", s:"Mario G√∂tze", l:"Bundesliga", c:"#e1000f", a:78, m:78, d:78},
  {n:"Mainz 05", i:"üî¥‚ö™", s:"Nadiem Amiri", l:"Bundesliga", c:"#c3141e", a:73, m:78, d:75},
  {n:"M'gladbach", i:"‚ö™üü¢", s:"Franck Honorat", l:"Bundesliga", c:"#ffffff", a:76, m:75, d:75},
  {n:"RB Leipzig", i:"‚ö™üî¥", s:"P√©ter Gul√°csi", l:"Bundesliga", c:"#de0039", a:77, m:79, d:79},
  {n:"Stuttgart", i:"‚ö™üî¥", s:"Angelo Stiller", l:"Bundesliga", c:"#e30613", a:80, m:77, d:76},
  {n:"Wolfsburg", i:"üü¢‚ö™", s:"Mohamed Amoura", l:"Bundesliga", c:"#65b32e", a:80, m:76, d:75},
  // AR√ÅBIA
  {n:"Al-Ahli", i:"üü¢‚ö™", s:"Riyad Mahrez & Edouard Mendy", l:"Saudi Pro", c:"#006400", a:74, m:74, d:73},
  {n:"Al-Hilal", i:"üîµ‚ö™", s:"Benzema & Milinkoviƒá-Saviƒá", l:"Saudi Pro", c:"#3b6eff", a:78, m:80, d:75},
  {n:"Al-Ittihad", i:"‚ö´üü°", s:"Moussa Diaby & Fabinho Tavares", l:"Saudi Pro", c:"#fdb912", a:79, m:74, d:72},
  {n:"Al Nassr", i:"üü°üîµ", s:"Cristiano Ronaldo & Jo√£o F√©lix", l:"Saudi Pro", c:"#ffe600", a:83, m:74, d:74},
  // ARGENTINA
  {n:"Boca Juniors", i:"üîµüü°", s:"Leandro Paredes & Edinson Cavani", l:"Argentina", c:"#003366", a:74, m:76, d:73},
  {n:"Estudiantes", i:"üî¥‚ö™", s:"Guido Carrillo", l:"Argentina", c:"#e30613", a:76, m:73, d:72},
  {n:"Racing Club", i:"üîµ‚ö™", s:"Santiago Sosa", l:"Argentina", c:"#6caee0", a:74, m:73, d:74},
  {n:"River Plate", i:"‚ö™üî¥", s:"Marcos Acu√±a & Juan Quintero", l:"Argentina", c:"#ffffff", a:75, m:75, d:75},
  {n:"Rosario Central", i:"üîµüü°", s:"√Ångel Di Mar√≠a", l:"Argentina", c:"#003a70", a:72, m:73, d:72},
  // ESPANHA
  {n:"Alav√©s", i:"üîµ‚ö™", s:"Antonio Blanco", l:"La Liga", c:"#005eb8", a:74, m:73, d:74},
  {n:"Athletic Bilbao", i:"üî¥‚ö™", s:"I√±aki Williams, Nico Williams & Oihan Sancet", l:"La Liga", c:"#e30613", a:78, m:81, d:79},
  {n:"Atl√©tico Madrid", i:"üî¥‚ö™", s:"Griezmann, √Ålvarez & Ademola Lookman", l:"La Liga", c:"#cb3524", a:84, m:81, d:81},
  {n:"Barcelona", i:"üîµüî¥", s:"Raphinha Belloli & Lamine Yamal", l:"La Liga", c:"#004d98", a:85, m:86, d:83},
  {n:"Celta Vigo", i:"üîµ‚ö™", s:"Aspas, Mingueza & Borja Iglesias", l:"La Liga", c:"#8ac3ee", a:77, m:75, d:77},
  {n:"Elche", i:"üü¢‚ö™", s:"Andr√© Silva", l:"La Liga 2", c:"#00a550", a:73, m:73, d:75},
  {n:"Mallorca", i:"üî¥‚ö´", s:"Sergi Darder, Muriqi & Antonio Ra√≠llo", l:"La Liga", c:"#e30613", a:80, m:75, d:78},
  {n:"Osasuna", i:"üî¥üîµ", s:"Aimar Oroz & Javi Gal√°n", l:"La Liga", c:"#0a346f", a:81, m:76, d:76},
  {n:"Real Betis", i:"üü¢‚ö™", s:"Antony Matheus & Isco Alarc√≥n", l:"La Liga", c:"#00b140", a:79, m:78, d:77},
  {n:"Real Madrid", i:"‚ö™‚ö™", s:"Vin√≠cius Jr, Kylian Mbapp√© & Rodrygo Silva", l:"La Liga", c:"#ffffff", a:85, m:83, d:83},
  {n:"Real Sociedad", i:"üîµ‚ö™", s:"Kubo, Oyarzabal & √Ålex Remiro", l:"La Liga", c:"#0067b1", a:82, m:77, d:75},
  {n:"Sevilla FC", i:"‚ö™üî¥", s:"Alex S√°nchez & Djibril Sow", l:"La Liga", c:"#ffffff", a:74, m:75, d:76},
  {n:"Valencia CF", i:"‚ö™‚ö´", s:"Jos√© Gay√† & Pepelu", l:"La Liga", c:"#ffffff", a:76, m:76, d:75},
  {n:"Villarreal CF", i:"üü°üü°", s:"Parejo, Moreno & Alberto Moleiro", l:"La Liga", c:"#fde100", a:80, m:80, d:77},
  // EUA
  {n:"Inter Miami", i:"üå∏‚ö´", s:"Lionel Messi & Luis Su√°rez", l:"MLS", c:"#f7b5cd", a:82, m:70, d:65},
  {n:"Whitecaps FC", i:"üîµ‚ö™", s:"Thomas M√ºller", l:"MLS", c:"#ffffff", a:69, m:72, d:69},
  {n:"LAFC", i:"‚ö´üü°", s:"Son Heung-min", l:"MLS", c:"#000000", a:75, m:69, d:70},
  {n:"LA Galaxy", i:"‚ö™üîµ", s:"Marco Reus", l:"MLS", c:"#ffffff", a:76, m:72, d:68},
  // FRAN√áA
  {n:"Lille OSC", i:"üî¥üîµ", s:"Olivier Giroud", l:"Ligue 1", c:"#e01e37", a:78, m:77, d:76},
  {n:"Olympique Lyon", i:"‚ö™üîµ", s:"Endrick Felipe", l:"Ligue 1", c:"#ffffff", a:75, m:77, d:76},
  {n:"Marseille", i:"‚ö™üîµ", s:"Igor Paix√£o & Mason Greenwood", l:"Ligue 1", c:"#ffffff", a:80, m:79, d:79},
  {n:"AS Monaco", i:"üî¥‚ö™", s:"Paul Pogba", l:"Ligue 1", c:"#e30613", a:76, m:76, d:78},
  {n:"Paris FC", i:"üîµ‚ö™", s:"Ot√°vio Edmilson", l:"Ligue 1", c:"#002d72", a:74, m:75, d:73},
  {n:"PSG", i:"üîµüî¥", s:"Demb√©l√©, Kvaratskhelia & D√©sir√© Dou√©", l:"Ligue 1", c:"#004170", a:85, m:85, d:86},
  {n:"Strasbourg", i:"üîµ‚ö™", s:"Valent√≠n Barco & Julio Enciso", l:"Ligue 1", c:"#009ddc", a:77, m:74, d:75},
  // HOLANDA
  {n:"Ajax", i:"‚ö™üî¥", s:"Wout Weghorst", l:"Eredivisie", c:"#ffffff", a:77, m:72, d:74},
  {n:"AZ Alkmaar", i:"üî¥‚ö™", s:"Weslley Patati", l:"Eredivisie", c:"#db0d0d", a:74, m:72, d:72},
  {n:"Feyenoord", i:"üî¥‚ö™", s:"Quinten Timber", l:"Eredivisie", c:"#ffffff", a:75, m:75, d:74},
  {n:"PSV Eindhoven", i:"üî¥‚ö™", s:"Ivan Perisic", l:"Eredivisie", c:"#ff0000", a:77, m:78, d:76},
  // INGLATERRA
  {n:"Arsenal", i:"üî¥‚ö™", s:"Bukayo Saka & Viktor Gy√∂keres", l:"Premier League", c:"#EF0107", a:84, m:85, d:85},
  {n:"Aston Villa", i:"üü£üîµ", s:"Watkins, Rogers & Emi Mart√≠nez", l:"Premier League", c:"#670E36", a:82, m:79, d:80},
  {n:"Bournemouth", i:"üî¥‚ö´", s:"Evanilson Lima & Rayan Vitor", l:"Premier League", c:"#da291c", a:78, m:77, d:77},
  {n:"Brentford", i:"üî¥‚ö™", s:"Igor Thiago & Mikkel Damsgaard", l:"Premier League", c:"#e30613", a:79, m:78, d:77},
  {n:"Brighton", i:"üîµ‚ö™", s:"Kaoru Mitoma", l:"Premier League", c:"#0057b8", a:79, m:79, d:78},
  {n:"Burnley", i:"üü£üîµ", s:"Kyle Walker", l:"Premier League", c:"#6c1d45", a:74, m:75, d:75},
  {n:"Chelsea", i:"üîµ‚ö™", s:"Est√™v√£o Willian & Jo√£o Pedro", l:"Premier League", c:"#034694", a:80, m:82, d:80},
  {n:"Crystal Palace", i:"üîµüî¥", s:"Yeremy Pino", l:"Premier League", c:"#1b458f", a:79, m:78, d:78},
  {n:"Everton", i:"üîµ‚ö™", s:"Jordan Pickford", l:"Premier League", c:"#003399", a:76, m:78, d:77},
  {n:"Fulham", i:"‚ö™‚ö´", s:"Bernd Leno", l:"Premier League", c:"#ffffff", a:77, m:78, d:77},
  {n:"Leeds United", i:"‚ö™üü°", s:"Lucas Perri", l:"Premier League", c:"#ffffff", a:76, m:76, d:76},
  {n:"Liverpool", i:"üî¥üî¥", s:"Mohamed Salah & Alexander Isak", l:"Premier League", c:"#c8102e", a:85, m:84, d:83},
  {n:"Man City", i:"üîµ‚ö™", s:"Erling Haaland & Rayan Cherki", l:"Premier League", c:"#6fc7ff", a:85, m:85, d:82},
  {n:"Man Utd", i:"üî¥‚ö´", s:"Bruno Fernandes & Matheus Cunha", l:"Premier League", c:"#da291c", a:82, m:80, d:80},
  {n:"Newcastle", i:"‚ö´‚ö™", s:"Gordon, Bruno Guimar√£es & Joelinton", l:"Premier League", c:"#000000", a:80, m:84, d:79},
  {n:"Nottm Forest", i:"üî¥‚ö™", s:"Igor Jesus & Chris Wood", l:"Premier League", c:"#dd0000", a:77, m:78, d:81},
  {n:"Sunderland", i:"üî¥‚ö™", s:"Granit Xhaka, Talbi & Mukiele", l:"Premier League", c:"#ff0000", a:76, m:77, d:79},
  {n:"Tottenham", i:"‚ö™üîµ", s:"Maddison, Solanke & Richarlison", l:"Premier League", c:"#ffffff", a:79, m:79, d:81},
  {n:"West Ham", i:"üü£üîµ", s:"Jarrod Bowen & Taty Castellanos", l:"Premier League", c:"#7a263a", a:76, m:78, d:76},
  {n:"Wolves", i:"üü†‚ö´", s:"Jo√£o Gomes & Jos√© S√°", l:"Premier League", c:"#fdb913", a:75, m:75, d:75},
  // IT√ÅLIA
  {n:"Atalanta", i:"üîµ‚ö´", s:"Marten de Roon & √âderson Jos√©", l:"Serie A", c:"#1f2f57", a:77, m:78, d:77},
  {n:"Bologna", i:"üî¥üîµ", s:"Riccardo Orsolini", l:"Serie A", c:"#a6192e", a:76, m:77, d:74},
  {n:"Cagliari", i:"üî¥üîµ", s:"Andrea Belotti", l:"Serie A", c:"#00236a", a:73, m:73, d:72},
  {n:"Como", i:"üîµ‚ö™", s:"Nico Paz", l:"Serie A", c:"#0070b0", a:77, m:76, d:74},
  {n:"Cremonese", i:"üî¥üîò", s:"Jamie Vardy", l:"Serie A", c:"#a4a4a4", a:74, m:72, d:72},
  {n:"Fiorentina", i:"üü£‚ö™", s:"Moise Kean", l:"Serie A", c:"#4f2c8f", a:78, m:74, d:75},
  {n:"Genoa", i:"üî¥üîµ", s:"Ruslan Malinovskyi", l:"Serie A", c:"#aa0000", a:73, m:73, d:71},
  {n:"Verona", i:"üü°üîµ", s:"Suat Serdar", l:"Serie A", c:"#ffff00", a:72, m:73, d:71},
  {n:"Inter Milan", i:"üîµ‚ö´", s:"Lautaro Mart√≠nez & Nicol√≤ Barella", l:"Serie A", c:"#0068a8", a:86, m:83, d:82},
  {n:"Juventus", i:"‚ö´‚ö™", s:"Gleison Bremer & Kenan Yƒ±ldƒ±z", l:"Serie A", c:"#ffffff", a:81, m:80, d:80},
  {n:"Lazio", i:"üîµ‚ö™", s:"Mattia Zaccagni", l:"Serie A", c:"#87d8f7", a:79, m:76, d:78},
  {n:"Lecce", i:"üü°üî¥", s:"Wladimiro Falcone", l:"Serie A", c:"#dc1e28", a:71, m:71, d:71},
  {n:"Milan", i:"üî¥‚ö´", s:"Rafael Le√£o & Luka Modriƒá", l:"Serie A", c:"#fb090b", a:84, m:81, d:77},
  {n:"Napoli", i:"üîµ‚ö™", s:"Kevin De Bruyne & Scott McTominay", l:"Serie A", c:"#003e7e", a:79, m:82, d:80},
  {n:"Parma", i:"üü°üîµ", s:"Patrick Cutrone", l:"Serie A", c:"#ffd700", a:71, m:72, d:73},
  {n:"Pisa", i:"üîµ‚ö´", s:"Ra√∫l Albiol", l:"Serie A", c:"#0057b8", a:72, m:72, d:71},
  {n:"Roma", i:"üü§üü†", s:"Paulo Dybala & Wesley Fran√ßa", l:"Serie A", c:"#8e1f2f", a:79, m:79, d:80},
  {n:"Sassuolo", i:"üü¢‚ö´", s:"Domenico Berardi", l:"Serie A", c:"#00a859", a:77, m:74, d:72},
  {n:"Torino", i:"üü§‚ö™", s:"Ivan Iliƒá & Duv√°n Zapata", l:"Serie A", c:"#8a1e2b", a:78, m:73, d:75},
  {n:"Udinese", i:"‚ö´‚ö™", s:"Nicol√≤ Zaniolo", l:"Serie A", c:"#000000", a:73, m:72, d:73},
  // PORTUGAL
  {n:"Benfica", i:"üî¥‚ö™", s:"Vangelis Pavlidis", l:"Liga Portugal", c:"#ff3b3b", a:79, m:78, d:78},
  {n:"Braga", i:"üî¥‚ö™", s:"Ricardo Horta", l:"Liga Portugal", c:"#e00000", a:74, m:75, d:74},
  {n:"Porto", i:"üîµ‚ö™", s:"Alan Varela", l:"Liga Portugal", c:"#004d9c", a:78, m:77, d:78},
  {n:"Sporting CP", i:"üü¢‚ö™", s:"Morten Hjulmand", l:"Liga Portugal", c:"#008057", a:78, m:80, d:77},
  // SU√ç√áA
  {n:"Basel", i:"üî¥üîµ", s:"Xherdan Shaqiri", l:"Super League", c:"#ff2e2e", a:68, m:72, d:69},
  {n:"Young Boys", i:"üü°‚ö´", s:"Alvyn Sanches", l:"Super League", c:"#ffd700", a:71, m:71, d:70},
  // TURQUIA
  {n:"Be≈üikta≈ü", i:"‚ö´‚ö™", s:"Orkun K√∂k√ß√º", l:"S√ºper Lig", c:"#000000", a:74, m:76, d:73},
  {n:"Fenerbah√ße", i:"üü°üîµ", s:"Ederson Santana", l:"S√ºper Lig", c:"#002d72", a:80, m:79, d:77},
  {n:"Galatasaray", i:"üü°üî¥", s:"Victor Osimhen", l:"S√ºper Lig", c:"#a90432", a:82, m:80, d:78}
];

let pNames = { a: "Alpha", b: "Beta" };
let isDrafting = false;
let lastDraws = [];

// CALCULO DE FOR√áA (Meio-Campo Vale Mais)
function getWeightedOVR(t) {
  let val = (t.a * 0.3) + (t.m * 0.4) + (t.d * 0.3);
  return Math.min(Math.max(Math.round(val), 60), 99);
}

function bootArena() {
  SoundSystem.init(); // DESBLOQUEIO DE SOM
  pNames.a = document.getElementById('p1Input').value || "Jogador 1";
  pNames.b = document.getElementById('p2Input').value || "Jogador 2";
  document.getElementById('lobby').style.display = 'none';
  document.getElementById('arena').style.display = 'block';
  shuffleNames();
}

function shuffleNames() {
  const rev = Math.random() > 0.5;
  document.getElementById('n1_owner').innerText = "üéÆ " + (rev ? pNames.b : pNames.a);
  document.getElementById('n2_owner').innerText = "üéÆ " + (rev ? pNames.a : pNames.b);
}

function startDraft() {
  if(isDrafting) return; isDrafting = true;
  document.getElementById('btnSortear').disabled = true;
  SoundSystem.init(); 
  document.getElementById('arena').classList.add('shuffling');
  let ticks = 0;
  const timer = setInterval(() => {
    updateCard(1, teamsDB[Math.floor(Math.random()*teamsDB.length)]);
    updateCard(2, teamsDB[Math.floor(Math.random()*teamsDB.length)]);
    SoundSystem.playTick(160 + (ticks * 10));
    ticks++;
    if(ticks > 15) { clearInterval(timer); finalize(); }
  }, 90);
}

function finalize() {
  shuffleNames();
  let available = teamsDB.filter(t => !lastDraws.includes(t.n));
  if(available.length < 20) { lastDraws = []; available = teamsDB; }

  const t1 = available[Math.floor(Math.random()*available.length)];
  const ovr1 = getWeightedOVR(t1);

  // MATCHMAKING INTELIGENTE
  let pool = available.filter(t => {
    const ovr2 = getWeightedOVR(t);
    const diff = Math.abs(ovr1 - ovr2);
    const tol = ovr1 > 84 ? 3 : 4; // Toler√¢ncia de 3 a 4 pontos
    return diff <= tol && t.n !== t1.n;
  });

  if(pool.length === 0) pool = available.filter(t => t.n !== t1.n);
  const t2 = pool[Math.floor(Math.random()*pool.length)];

  lastDraws.push(t1.n, t2.n);
  if(lastDraws.length > 14) lastDraws.splice(0, 2);

  updateCard(1, t1); updateCard(2, t2);
  SoundSystem.playImpact();
  document.getElementById('arena').classList.remove('shuffling');
  document.getElementById('btnSortear').disabled = false;
  isDrafting = false;
}

function updateCard(id, data) {
  const c = document.getElementById(`c${id}`);
  const ovr = getWeightedOVR(data);
  c.style.setProperty('--team-color', data.c);
  document.getElementById(`o${id}`).innerText = ovr;
  
  // COLOR GRADING (Sem√°foro)
  const oBox = document.getElementById(`o${id}`);
  oBox.className = 'ovr-box'; // reset
  if(ovr >= 85) oBox.classList.add('val-legend');
  else if(ovr >= 80) oBox.classList.add('val-elite');
  else if(ovr >= 75) oBox.classList.add('val-gold');
  else oBox.classList.add('val-base');

  document.getElementById(`name${id}`).innerText = data.n;
  document.getElementById(`i${id}`).innerText = data.i;
  document.getElementById(`star${id}`).innerText = "‚≠ê " + data.s;
  
  // Update Bars
  setBar(id, 'a', data.a);
  setBar(id, 'm', data.m);
  setBar(id, 'd', data.d);
}

function setBar(id, type, val) {
  document.getElementById(`v${id}${type}`).innerText = val;
  const bar = document.getElementById(`f${id}${type}`);
  bar.style.width = val + "%";
}

function toggleTheme() {
  const b = document.body;
  b.setAttribute('data-theme', b.getAttribute('data-theme') === 'tactical' ? '' : 'tactical');
}
</script>
</body>
    </html>
      
