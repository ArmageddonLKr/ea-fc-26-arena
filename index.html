<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>EA FC 26 ‚Ä¢ Ultimate Dark</title>

<style>
:root {
  --bg: #020202; /* Dark Black Real */
  --surface: #0b0b0e;
  --p1: #ff004c; /* Neon Red */
  --p2: #00e5ff; /* Neon Cyan */
  --gold: #ffcc00;
  --border: rgba(255, 255, 255, 0.04);
  --ease: cubic-bezier(0.19, 1, 0.22, 1);
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; outline: none; }

body {
  background-color: var(--bg); color: #fff;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  min-height: 100vh; display: flex; flex-direction: column; align-items: center;
  background-image: radial-gradient(circle at 50% -20%, #151515 0%, #000000 90%);
}

.app { width: 100%; max-width: 460px; padding: 20px; text-align: center; padding-bottom: 40px; }

h1 { font-size: 0.8rem; font-weight: 900; letter-spacing: 12px; margin: 35px 0; text-transform: uppercase; color: #fff; opacity: 0.3; }

/* LOBBY */
#lobby {
  background: var(--surface); padding: 50px 30px; border-radius: 40px;
  border: 1px solid var(--border); box-shadow: 0 60px 120px rgba(0,0,0,1);
}

.input-group { margin-bottom: 25px; text-align: left; }
.input-group label { font-size: 0.6rem; font-weight: 800; color: #666; text-transform: uppercase; letter-spacing: 2px; margin-left: 15px; margin-bottom: 8px; display: block; }

.input-field {
  width: 100%; padding: 22px; background: #000; border: 1px solid #1a1a1a;
  color: #fff; border-radius: 20px; font-size: 1.1rem; font-weight: 600;
  transition: all 0.4s var(--ease);
}
.input-field:focus { border-color: #444; transform: translateY(-2px); }

.btn-enter { width: 100%; padding: 24px; background: #fff; color: #000; border: none; border-radius: 20px; font-size: 1rem; font-weight: 900; text-transform: uppercase; cursor: pointer; }

/* ARENA */
#arena { display: none; width: 100%; animation: reveal 0.8s var(--ease); }
@keyframes reveal { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }

.btn-draw {
  background: #111; color: #fff; border: 1px solid #333; width: 100%; padding: 22px;
  font-size: 1.1rem; font-weight: 950; text-transform: uppercase; border-radius: 20px;
  margin-bottom: 40px; cursor: pointer; transition: 0.2s; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}
.btn-draw:active { transform: scale(0.97); background: #222; }
.btn-draw:disabled { opacity: 0.3; cursor: default; }

/* CARD DESIGN */
.card {
  position: relative; background: #08080a; border-radius: 35px; margin-bottom: 25px;
  overflow: hidden; border: 1px solid rgba(255,255,255,0.03);
  box-shadow: 0 40px 90px rgba(0,0,0,0.9); transition: transform 0.4s var(--ease);
}

/* BARRA LATERAL AGORA USA A COR DO TIME */
.card-bar { position: absolute; top: 0; left: 0; width: 12px; height: 100%; background: var(--team-color); z-index: 10; }
.card-glow { position: absolute; inset: 0; background: radial-gradient(circle at 0% 0%, var(--team-color), transparent 85%); opacity: 0.18; z-index: 1; }
.card-content { position: relative; z-index: 5; padding: 35px 30px; text-align: left; }

/* BADGE DO DONO COM COR DE FUNDO */
.owner-badge {
  background: var(--side-color); padding: 6px 14px; border-radius: 8px;
  font-size: 0.65rem; font-weight: 900; color: #000; text-transform: uppercase; letter-spacing: 1px;
  margin-bottom: 20px; display: inline-block; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

.ovr-box { 
  float: right; font-size: 1.8rem; font-weight: 1000; color: #fff; 
  background: #000; padding: 8px 18px; border-radius: 16px; border: 1px solid #1a1a1a;
}

.team-name { font-size: 2.2rem; font-weight: 900; line-height: 0.9; color: #fff; text-transform: uppercase; letter-spacing: -2px; margin-bottom: 8px; }
.kit-icon { font-size: 1.2rem; margin-right: 10px; vertical-align: middle; }
.star-player { font-size: 0.85rem; color: #888; font-weight: 700; display: block; text-transform: uppercase; letter-spacing: 1px; }
.star-highlight { color: var(--gold); }

/* STATS */
.stats-row { display: flex; gap: 12px; border-top: 1px solid #151515; padding-top: 25px; margin-top: 25px; }
.stat-box { flex: 1; }
.stat-title { font-size: 0.5rem; color: #444; font-weight: 900; display: block; margin-bottom: 8px; text-align: center; }
.track { height: 5px; background: #111; border-radius: 10px; overflow: hidden; }
.fill { height: 100%; background: var(--team-color); width: 0%; transition: width 1s var(--ease); box-shadow: 0 0 10px var(--team-color); }
.stat-num { font-size: 1rem; font-weight: 900; display: block; margin-top: 8px; text-align: center; color: #fff; }

.val-legend { color: #00e5ff; text-shadow: 0 0 20px rgba(0, 229, 255, 0.6); } 
.val-elite { color: #00ff66; text-shadow: 0 0 20px rgba(0, 255, 102, 0.6); } 
.val-gold { color: #ffcc00; } 
.val-base { color: #666; } 

.vs { font-size: 1.4rem; font-weight: 900; font-style: italic; color: #1a1a1a; margin: -10px 0 25px; letter-spacing: 4px; }

footer { margin-top: 50px; font-size: 0.6rem; color: #333; font-weight: 800; text-transform: uppercase; letter-spacing: 2px; }

.shuffling .card { opacity: 0.2; filter: blur(20px) grayscale(1); transform: scale(0.96); }
</style>
</head>
  <body>
<div class="app">
  <h1>COMPETITIVE ENGINE</h1>
  
  <div id="lobby">
    <div class="input-group">
      <label>Comandante 01 (Vermelho)</label>
      <input type="text" id="p1Input" class="input-field" placeholder="Nome...">
    </div>
    <div class="input-group">
      <label>Comandante 02 (Azul)</label>
      <input type="text" id="p2Input" class="input-field" placeholder="Nome...">
    </div>
    <button class="btn-enter" onclick="bootArena()">Sincronizar Arena</button>
  </div>

  <div id="arena">
    <button class="btn-draw" id="btnSortear" onclick="startDraft()">Gerar Matchmaking</button>
    
    <div id="cardsGrid">
      <div class="card" id="c1">
        <div class="card-bar"></div> 
        <div class="card-glow" id="g1"></div>
        <div class="card-content">
          <div class="ovr-box" id="o1">00</div>
          <div class="owner-badge" id="n1_owner" style="--side-color: var(--p1)">---</div>
          
          <div class="team-block">
            <div class="team-name"><span class="kit-icon" id="i1"></span><span id="name1">---</span></div>
            <span class="star-player" id="star1">---</span>
          </div>
          <div class="stats-row">
            <div class="stat-box"><span class="stat-title">ATA</span><div class="track"><div class="fill" id="f1a"></div></div><span class="stat-num" id="v1a">0</span></div>
            <div class="stat-box"><span class="stat-title">MED</span><div class="track"><div class="fill" id="f1m"></div></div><span class="stat-num" id="v1m">0</span></div>
            <div class="stat-box"><span class="stat-title">DEF</span><div class="track"><div class="fill" id="f1d"></div></div><span class="stat-num" id="v1d">0</span></div>
          </div>
        </div>
      </div>

      <div class="vs">VS</div>

      <div class="card" id="c2">
        <div class="card-bar"></div>
        <div class="card-glow" id="g2"></div>
        <div class="card-content">
          <div class="ovr-box" id="o2">00</div>
          <div class="owner-badge" id="n2_owner" style="--side-color: var(--p2)">---</div>
          
          <div class="team-block">
            <div class="team-name"><span class="kit-icon" id="i2"></span><span id="name2">---</span></div>
            <span class="star-player" id="star2">---</span>
          </div>
          <div class="stats-row">
            <div class="stat-box"><span class="stat-title">ATA</span><div class="track"><div class="fill" id="f2a"></div></div><span class="stat-num" id="v2a">0</span></div>
            <div class="stat-box"><span class="stat-title">MED</span><div class="track"><div class="fill" id="f2m"></div></div><span class="stat-num" id="v2m">0</span></div>
            <div class="stat-box"><span class="stat-title">DEF</span><div class="track"><div class="fill" id="f2d"></div></div><span class="stat-num" id="v2d">0</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    EA FC 26 COMPETTITIVE ‚Ä¢ Direitos reservados &copy; J. Rayan
  </footer>
</div>
    <script>
// --- AUDIO ENGINE (MOBILE SAFE) ---
const SoundSystem = {
  ctx: null,
  init() {
    if(!this.ctx) {
      this.ctx = new (window.AudioContext || window.webkitAudioContext)();
      const b = this.ctx.createBuffer(1, 1, 22050);
      const s = this.ctx.createBufferSource();
      s.buffer = b; s.connect(this.ctx.destination); s.start(0);
    }
    if(this.ctx.state === 'suspended') this.ctx.resume();
  },
  playTick(f) {
    if(!this.ctx) return;
    const o=this.ctx.createOscillator(), g=this.ctx.createGain();
    o.type='square'; o.frequency.setValueAtTime(f + (Math.random()*10-5), this.ctx.currentTime);
    g.gain.setValueAtTime(0.05, this.ctx.currentTime); 
    g.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime+0.08);
    o.connect(g); g.connect(this.ctx.destination); o.start(); o.stop(this.ctx.currentTime+0.08);
  },
  playImpact() {
    if(!this.ctx) return;
    const o=this.ctx.createOscillator(), g=this.ctx.createGain();
    o.type='triangle'; o.frequency.setValueAtTime(80, this.ctx.currentTime);
    o.frequency.exponentialRampToValueAtTime(30, this.ctx.currentTime+0.5);
    g.gain.setValueAtTime(0.3, this.ctx.currentTime); 
    g.gain.linearRampToValueAtTime(0, this.ctx.currentTime+0.5);
    o.connect(g); g.connect(this.ctx.destination); o.start(); o.stop(this.ctx.currentTime+0.5);
  }
};

const teamsDB = [
  // ALEMANHA
  {n:"FC K√∂ln", i:"üî¥‚ö™", s:"Marius B√ºlter", c:"#e30613", a:74, m:73, d:72},
  {n:"Augsburg", i:"üî¥üü¢", s:"Alexis Claude-Maurice", c:"#ba3733", a:75, m:74, d:74},
  {n:"Bayer Leverkusen", i:"üî¥‚ö´", s:"Patrik Schick", c:"#000000", a:82, m:79, d:78},
  {n:"Bayern M√ºnchen", i:"üî¥‚ö™", s:"Harry Kane", c:"#dd0000", a:89, m:85, d:83},
  {n:"Borussia Dortmund", i:"üü°‚ö´", s:"Serhou Guirassy", c:"#FDE100", a:81, m:81, d:82},
  {n:"Eintracht Frankfurt", i:"‚ö™üî¥", s:"Mario G√∂tze", c:"#e1000f", a:78, m:78, d:78},
  {n:"Mainz 05", i:"üî¥‚ö™", s:"Nadiem Amiri", c:"#c3141e", a:73, m:78, d:75},
  {n:"M'gladbach", i:"‚ö™üü¢", s:"Franck Honorat", c:"#ffffff", a:76, m:75, d:75},
  {n:"RB Leipzig", i:"‚ö™üî¥", s:"P√©ter Gul√°csi", c:"#de0039", a:77, m:79, d:79},
  {n:"Stuttgart", i:"‚ö™üî¥", s:"Angelo Stiller", c:"#e30613", a:80, m:77, d:76},
  {n:"Wolfsburg", i:"üü¢‚ö™", s:"Mohamed Amoura", c:"#65b32e", a:80, m:76, d:75},
  // AR√ÅBIA
  {n:"Al-Ahli", i:"üü¢‚ö™", s:"Riyad Mahrez & Edouard Mendy", c:"#006400", a:74, m:74, d:73},
  {n:"Al-Hilal", i:"üîµ‚ö™", s:"Karim Benzema & Milinkoviƒá-Saviƒá", c:"#3b6eff", a:78, m:80, d:75},
  {n:"Al-Ittihad", i:"‚ö´üü°", s:"Moussa Diaby & Fabinho Tavares", c:"#fdb912", a:79, m:74, d:72},
  {n:"Al Nassr", i:"üü°üîµ", s:"Cristiano Ronaldo & Jo√£o F√©lix", c:"#ffe600", a:83, m:74, d:74},
  // ARGENTINA
  {n:"Boca Juniors", i:"üîµüü°", s:"Leandro Paredes & Edinson Cavani", c:"#003366", a:74, m:76, d:73},
  {n:"Estudiantes", i:"üî¥‚ö™", s:"Guido Carrillo", c:"#e30613", a:76, m:73, d:72},
  {n:"Racing Club", i:"üîµ‚ö™", s:"Santiago Sosa", c:"#6caee0", a:74, m:73, d:74},
  {n:"River Plate", i:"‚ö™üî¥", s:"Marcos Acu√±a & Juan Quintero", c:"#ffffff", a:75, m:75, d:75},
  {n:"Rosario Central", i:"üîµüü°", s:"√Ångel Di Mar√≠a", c:"#003a70", a:72, m:73, d:72},
  // ESPANHA
  {n:"Alav√©s", i:"üîµ‚ö™", s:"Antonio Blanco", c:"#005eb8", a:74, m:73, d:74},
  {n:"Athletic Bilbao", i:"üî¥‚ö™", s:"I√±aki Williams & Nico Williams", c:"#e30613", a:78, m:81, d:79},
  {n:"Atl√©tico Madrid", i:"üî¥‚ö™", s:"Griezmann & Juli√°n √Ålvarez", c:"#cb3524", a:84, m:81, d:81},
  {n:"Barcelona", i:"üîµüî¥", s:"Raphinha Belloli & Lamine Yamal", c:"#004d98", a:85, m:86, d:83},
  {n:"Celta Vigo", i:"üîµ‚ö™", s:"Iago Aspas & √ìscar Mingueza", c:"#8ac3ee", a:77, m:75, d:77},
  {n:"Elche", i:"üü¢‚ö™", s:"Andr√© Silva", c:"#00a550", a:73, m:73, d:75},
  {n:"Mallorca", i:"üî¥‚ö´", s:"Sergi Darder & Vedat Muriqi", c:"#e30613", a:80, m:75, d:78},
  {n:"Osasuna", i:"üî¥üîµ", s:"Aimar Oroz & Javi Gal√°n", c:"#0a346f", a:81, m:76, d:76},
  {n:"Real Betis", i:"üü¢‚ö™", s:"Antony Matheus & Isco Alarc√≥n", c:"#00b140", a:79, m:78, d:77},
  {n:"Real Madrid", i:"‚ö™‚ö™", s:"Vin√≠cius Jr, Kylian Mbapp√© & Rodrygo", c:"#ffffff", a:85, m:83, d:83},
  {n:"Real Sociedad", i:"üîµ‚ö™", s:"Takefusa Kubo & Mikel Oyarzabal", c:"#0067b1", a:82, m:77, d:75},
  {n:"Sevilla FC", i:"‚ö™üî¥", s:"Alex S√°nchez & Djibril Sow", c:"#ffffff", a:74, m:75, d:76},
  {n:"Valencia CF", i:"‚ö™‚ö´", s:"Jos√© Gay√† & Pepelu", c:"#ffffff", a:76, m:76, d:75},
  {n:"Villarreal CF", i:"üü°üü°", s:"Dani Parejo & Gerard Moreno", c:"#fde100", a:80, m:80, d:77},
  // EUA
  {n:"Inter Miami", i:"üå∏‚ö´", s:"Lionel Messi & Luis Su√°rez", c:"#f7b5cd", a:82, m:70, d:65},
  {n:"LA Galaxy", i:"‚ö™üîµ", s:"Marco Reus", c:"#ffffff", a:69, m:72, d:69},
  {n:"LAFC", i:"‚ö´üü°", s:"Son Heung-min", c:"#000000", a:75, m:69, d:70},
  {n:"Vancouver", i:"üîµ‚ö™", s:"Thomas M√ºller", c:"#ffffff", a:76, m:72, d:68},
  // FRAN√áA
  {n:"Lille OSC", i:"üî¥üîµ", s:"Olivier Giroud", c:"#e01e37", a:78, m:77, d:76},
  {n:"Lyon", i:"‚ö™üîµ", s:"Endrick Felipe", c:"#ffffff", a:75, m:77, d:76},
  {n:"Marseille", i:"‚ö™üîµ", s:"Igor Paix√£o & Mason Greenwood", c:"#ffffff", a:80, m:79, d:79},
  {n:"AS Monaco", i:"üî¥‚ö™", s:"Paul Pogba", c:"#e30613", a:76, m:76, d:78},
  {n:"Paris FC", i:"üîµ‚ö™", s:"Ot√°vio Edmilson", c:"#002d72", a:74, m:75, d:73},
  {n:"PSG", i:"üîµüî¥", s:"Demb√©l√©, Kvaratskhelia & D√©sir√© Dou√©", c:"#004170", a:85, m:85, d:86},
  {n:"Strasbourg", i:"üîµ‚ö™", s:"Valent√≠n Barco & Julio Enciso", c:"#009ddc", a:77, m:74, d:75},
  // HOLANDA
  {n:"Ajax", i:"‚ö™üî¥", s:"Wout Weghorst", c:"#ffffff", a:77, m:72, d:74},
  {n:"AZ Alkmaar", i:"üî¥‚ö™", s:"Weslley Patati", c:"#db0d0d", a:74, m:72, d:72},
  {n:"Feyenoord", i:"üî¥‚ö™", s:"Quinten Timber", c:"#ffffff", a:75, m:75, d:74},
  {n:"PSV Eindhoven", i:"üî¥‚ö™", s:"Ivan Perisic", c:"#ff0000", a:77, m:78, d:76},
  // INGLATERRA
  {n:"Arsenal", i:"üî¥‚ö™", s:"Bukayo Saka & Viktor Gy√∂keres", c:"#EF0107", a:84, m:85, d:85},
  {n:"Aston Villa", i:"üü£üîµ", s:"Ollie Watkins & Emi Mart√≠nez", c:"#670E36", a:82, m:79, d:80},
  {n:"Bournemouth", i:"üî¥‚ö´", s:"Evanilson Lima & Rayan Vitor", c:"#da291c", a:78, m:77, d:77},
  {n:"Brentford", i:"üî¥‚ö™", s:"Igor Thiago & Mikkel Damsgaard", c:"#e30613", a:79, m:78, d:77},
  {n:"Brighton", i:"üîµ‚ö™", s:"Kaoru Mitoma", c:"#0057b8", a:79, m:79, d:78},
  {n:"Burnley", i:"üü£üîµ", s:"Kyle Walker", c:"#6c1d45", a:74, m:75, d:75},
  {n:"Chelsea", i:"üîµ‚ö™", s:"Est√™v√£o Willian & Jo√£o Pedro", c:"#034694", a:80, m:82, d:80},
  {n:"Crystal Palace", i:"üîµüî¥", s:"Yeremy Pino", c:"#1b458f", a:79, m:78, d:78},
  {n:"Everton", i:"üîµ‚ö™", s:"Jordan Pickford", c:"#003399", a:76, m:78, d:77},
  {n:"Fulham", i:"‚ö™‚ö´", s:"Bernd Leno", c:"#ffffff", a:77, m:78, d:77},
  {n:"Leeds United", i:"‚ö™üü°", s:"Lucas Perri", c:"#ffffff", a:76, m:76, d:76},
  {n:"Liverpool", i:"üî¥üî¥", s:"Mohamed Salah & Alexander Isak", c:"#c8102e", a:85, m:84, d:83},
  {n:"Man City", i:"üîµ‚ö™", s:"Erling Haaland & Rayan Cherki", c:"#6fc7ff", a:85, m:85, d:82},
  {n:"Man Utd", i:"üî¥‚ö´", s:"Bruno Fernandes & Matheus Cunha", c:"#da291c", a:82, m:80, d:80},
  {n:"Newcastle", i:"‚ö´‚ö™", s:"Anthony Gordon & Bruno Guimar√£es", c:"#000000", a:80, m:84, d:79},
  {n:"Nottm Forest", i:"üî¥‚ö™", s:"Igor Jesus & Chris Wood", c:"#dd0000", a:77, m:78, d:81},
  {n:"Sunderland", i:"üî¥‚ö™", s:"Granit Xhaka", c:"#ff0000", a:76, m:77, d:79},
  {n:"Tottenham", i:"‚ö™üîµ", s:"James Maddison, Solanke & Richarlison \"O Pombo\"", c:"#ffffff", a:79, m:79, d:81},
  {n:"West Ham", i:"üü£üîµ", s:"Jarrod Bowen & Lucas Paquet√°", c:"#7a263a", a:76, m:78, d:76},
  {n:"Wolves", i:"üü†‚ö´", s:"Jo√£o Gomes & Jos√© S√°", c:"#fdb913", a:75, m:75, d:75},
  // IT√ÅLIA
  {n:"Atalanta", i:"üîµ‚ö´", s:"Marten de Roon & √âderson Jos√©", c:"#1f2f57", a:77, m:78, d:77},
  {n:"Bologna", i:"üî¥üîµ", s:"Riccardo Orsolini", c:"#a6192e", a:76, m:77, d:74},
  {n:"Cagliari", i:"üî¥üîµ", s:"Andrea Belotti", c:"#00236a", a:73, m:73, d:72},
  {n:"Como", i:"üîµ‚ö™", s:"Nico Paz", c:"#0070b0", a:77, m:76, d:74},
  {n:"Cremonese", i:"üî¥üîò", s:"Jamie Vardy", c:"#a4a4a4", a:74, m:72, d:72},
  {n:"Fiorentina", i:"üü£‚ö™", s:"Moise Kean", c:"#4f2c8f", a:78, m:74, d:75},
  {n:"Genoa", i:"üî¥üîµ", s:"Ruslan Malinovskyi", c:"#aa0000", a:73, m:73, d:71},
  {n:"Verona", i:"üü°üîµ", s:"Suat Serdar", c:"#ffff00", a:72, m:73, d:71},
  {n:"Inter Milan", i:"üîµ‚ö´", s:"Lautaro Mart√≠nez & Nicol√≤ Barella", c:"#0068a8", a:86, m:83, d:82},
  {n:"Juventus", i:"‚ö´‚ö™", s:"Gleison Bremer & Kenan Yƒ±ldƒ±z", c:"#ffffff", a:81, m:80, d:80},
  {n:"Lazio", i:"üîµ‚ö™", s:"Mattia Zaccagni", c:"#87d8f7", a:79, m:76, d:78},
  {n:"Lecce", i:"üü°üî¥", s:"Wladimiro Falcone", c:"#dc1e28", a:71, m:71, d:71},
  {n:"Milan", i:"üî¥‚ö´", s:"Rafael Le√£o & Luka Modriƒá", c:"#fb090b", a:84, m:81, d:77},
  {n:"Napoli", i:"üîµ‚ö™", s:"Kevin De Bruyne & Scott McTominay", c:"#003e7e", a:79, m:82, d:80},
  {n:"Parma", i:"üü°üîµ", s:"Patrick Cutrone", c:"#ffd700", a:71, m:72, d:73},
  {n:"Pisa", i:"üîµ‚ö´", s:"Ra√∫l Albiol", c:"#0057b8", a:72, m:72, d:71},
  {n:"Roma", i:"üü§üü†", s:"Paulo Dybala & Wesley Fran√ßa", c:"#8e1f2f", a:79, m:79, d:80},
  {n:"Sassuolo", i:"üü¢‚ö´", s:"Domenico Berardi", c:"#00a859", a:77, m:74, d:72},
  {n:"Torino", i:"üü§‚ö™", s:"Ivan Iliƒá & Duv√°n Zapata", c:"#8a1e2b", a:78, m:73, d:75},
  {n:"Udinese", i:"‚ö´‚ö™", s:"Nicol√≤ Zaniolo", c:"#000000", a:73, m:72, d:73},
  // PORTUGAL
  {n:"Benfica", i:"üî¥‚ö™", s:"Vangelis Pavlidis", c:"#ff3b3b", a:79, m:78, d:78},
  {n:"Braga", i:"üî¥‚ö™", s:"Ricardo Horta", c:"#e00000", a:74, m:75, d:74},
  {n:"Porto", i:"üîµ‚ö™", s:"Alan Varela", c:"#004d9c", a:78, m:77, d:78},
  {n:"Sporting CP", i:"üü¢‚ö™", s:"Morten Hjulmand", c:"#008057", a:78, m:80, d:77},
  // SU√ç√áA
  {n:"Basel", i:"üî¥üîµ", s:"Xherdan Shaqiri", c:"#ff2e2e", a:68, m:72, d:69},
  {n:"Young Boys", i:"üü°‚ö´", s:"Alvyn Sanches", c:"#ffd700", a:71, m:71, d:70},
  // TURQUIA
  {n:"Be≈üikta≈ü", i:"‚ö´‚ö™", s:"Orkun K√∂k√ß√º", c:"#000000", a:74, m:76, d:73},
  {n:"Fenerbah√ße", i:"üü°üîµ", s:"Ederson Santana", c:"#002d72", a:80, m:79, d:77},
  {n:"Galatasaray", i:"üü°üî¥", s:"Victor Osimhen", c:"#a90432", a:82, m:80, d:78}
];

let pNames = { a: "Alpha", b: "Beta" };
let isDrafting = false;
let lastTeams = [];

// CALCULO PONDERADO (40% MEIO-CAMPO)
function getWeightedOVR(t) {
  let val = (t.a * 0.3) + (t.m * 0.4) + (t.d * 0.3);
  return Math.min(Math.max(Math.round(val), 60), 99);
}

function bootArena() {
  SoundSystem.init(); // CLIQUE ESSENCIAL PARA O SOM
  pNames.a = document.getElementById('p1Input').value || "Jogador 1";
  pNames.b = document.getElementById('p2Input').value || "Jogador 2";
  document.getElementById('lobby').style.display = 'none';
  document.getElementById('arena').style.display = 'block';
  shuffleNames();
}

function shuffleNames() {
  const rev = Math.random() > 0.5;
  document.getElementById('n1_owner').innerText = (rev ? pNames.b : pNames.a);
  document.getElementById('n2_owner').innerText = (rev ? pNames.a : pNames.b);
  
  // Troca a cor do badge
  document.getElementById('n1_owner').style.setProperty('--side-color', rev ? 'var(--p2)' : 'var(--p1)');
  document.getElementById('n2_owner').style.setProperty('--side-color', rev ? 'var(--p1)' : 'var(--p2)');
}

function startDraft() {
  if(isDrafting) return;
  isDrafting = true;
  document.getElementById('btnSortear').disabled = true;
  SoundSystem.init(); 
  document.getElementById('arena').classList.add('shuffling');
  let ticks = 0;
  const timer = setInterval(() => {
    updateCard(1, teamsDB[Math.floor(Math.random()*teamsDB.length)]);
    updateCard(2, teamsDB[Math.floor(Math.random()*teamsDB.length)]);
    SoundSystem.playTick(160 + (ticks * 10));
    ticks++;
    if(ticks > 15) { clearInterval(timer); finalize(); }
  }, 90);
}

function finalize() {
  shuffleNames();
  let available = teamsDB.filter(t => !lastTeams.includes(t.n));
  if(available.length < 20) { lastTeams = []; available = teamsDB; }

  const t1 = available[Math.floor(Math.random()*available.length)];
  const ovr1 = getWeightedOVR(t1);

  // MATCHMAKING INTELIGENTE
  let pool = available.filter(t => {
    const ovr2 = getWeightedOVR(t);
    const diff = Math.abs(ovr1 - ovr2);
    // Toler√¢ncia: Top Tier = 3 | Mid = 4
    const tol = ovr1 > 84 ? 3 : 4; 
    return diff <= tol && t.n !== t1.n;
  });

  if(pool.length === 0) pool = available.filter(t => t.n !== t1.n);
  const t2 = pool[Math.floor(Math.random()*pool.length)];

  lastTeams.push(t1.n, t2.n);
  if(lastTeams.length > 14) lastTeams.splice(0, 2);

  updateCard(1, t1); updateCard(2, t2);
  SoundSystem.playImpact();
  document.getElementById('arena').classList.remove('shuffling');
  document.getElementById('btnSortear').disabled = false;
  isDrafting = false;
}

function updateCard(id, data) {
  const c = document.getElementById(`c${id}`);
  const ovr = getWeightedOVR(data);
  c.style.setProperty('--team-color', data.c);
  
  // SEM√ÅFORO DE CORES
  const oBox = document.getElementById(`o${id}`);
  oBox.className = 'ovr-box'; 
  if(ovr >= 85) oBox.classList.add('val-legend');
  else if(ovr >= 80) oBox.classList.add('val-elite');
  else if(ovr >= 75) oBox.classList.add('val-gold');
  else oBox.classList.add('val-base');

  oBox.innerText = ovr;
  document.getElementById(`name${id}`).innerText = data.n;
  document.getElementById(`i${id}`).innerText = data.i;
  document.getElementById(`star${id}`).innerText = "<span class='star-highlight'>‚≠ê " + data.s + "</span>";
  
  // BARRAS
  setBar(id, 'a', data.a);
  setBar(id, 'm', data.m);
  setBar(id, 'd', data.d);
}

function setBar(id, type, val) {
  document.getElementById(`v${id}${type}`).innerText = val;
  const bar = document.getElementById(`f${id}${type}`);
  bar.style.width = val + "%";
}
</script>
</body>
</html>

